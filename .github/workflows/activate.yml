name: ğŸ”„ æ¿€æ´»ä»“åº“å®šæ—¶ä»»åŠ¡

on:
  schedule:
    - cron: '0 */6 * * *'  # æ¯6å°æ—¶è¿è¡Œä¸€æ¬¡
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  activate:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        
      - name: ğŸ’“ ä¿æŒä»“åº“æ´»è·ƒ
        run: |
          echo "ğŸ’“ æ¿€æ´»ä»“åº“å®šæ—¶ä»»åŠ¡"
          echo "æœ€åæ¿€æ´»: $(date '+%Y-%m-%d %H:%M:%S')" > keep-alive.txt
          echo "æ­¤æ–‡ä»¶ç”¨äºä¿æŒGitHub Actionså®šæ—¶ä»»åŠ¡æ´»è·ƒ" >> keep-alive.txt
          echo "GitHubå¯èƒ½ä¼šæš‚åœä¸æ´»è·ƒä»“åº“çš„å®šæ—¶ä»»åŠ¡" >> keep-alive.txt
          echo "æ›´æ–°æ—¶é—´: $(date +%s)" >> keep-alive.txt
          
          git config --global user.name "github-actions"
          git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git add keep-alive.txt
          
          if git diff --cached --quiet; then
            echo "â¸ï¸ æ— éœ€æ›´æ–°"
          else
            git commit -m "ğŸ’“ ä¿æŒæ´»è·ƒ $(date '+%m-%d %H:%M')"
            git pull --rebase origin main
            git push origin main
            echo "âœ… å·²æ›´æ–°æ´»è·ƒæ–‡ä»¶"
          fi
