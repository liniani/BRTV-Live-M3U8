name: ğŸ’“ ä¿æŒä»“åº“æ´»è·ƒ

on:
  schedule:
    # æ¯å¤©è¿è¡Œ3æ¬¡ï¼Œä¿æŒä»“åº“æ´»è·ƒ
    - cron: '0 */8 * * *'  # æ¯8å°æ—¶ä¸€æ¬¡
  workflow_dispatch:  # å¯æ‰‹åŠ¨è§¦å‘

jobs:
  heartbeat:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    
    steps:
      - name: 1. æ£€å‡ºä»“åº“
        uses: actions/checkout@v4
        with:
          fetch-depth: 1
          
      - name: 2. æ›´æ–°å¿ƒè·³æ–‡ä»¶
        run: |
          echo "ğŸ’“ æ›´æ–°å¿ƒè·³æ–‡ä»¶..."
          echo "æœ€åæ´»è·ƒæ—¶é—´: $(date '+%Y-%m-%d %H:%M:%S')" > heartbeat.txt
          echo "GitHub Actions å¿ƒè·³ç»´æŠ¤" >> heartbeat.txt
          echo "æ­¤æ–‡ä»¶ç”¨äºä¿æŒä»“åº“æ´»è·ƒåº¦" >> heartbeat.txt
          echo "ç¡®ä¿å®šæ—¶ä»»åŠ¡èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ" >> heartbeat.txt
          echo "ç”Ÿæˆæ—¶é—´æˆ³: $(date +%s)" >> heartbeat.txt
          echo "ä¸‹æ¬¡å¿ƒè·³: $(date -d '+8 hours' '+%Y-%m-%d %H:%M:%S')" >> heartbeat.txt
          
      - name: 3. æäº¤æ›´æ–°
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: 'ğŸ’“ å¿ƒè·³æ›´æ–° $(date "+%m-%d %H:%M")'
          file_pattern: 'heartbeat.txt'
          commit_user_name: 'GitHub Actions Bot'
          commit_user_email: 'actions@github.com'
